<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Sales</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        #total-sales { font-weight: bold; margin-top: 20px; }
        @media (max-width: 600px) {
            body { margin: 10px; }
            table { font-size: 14px; }
        }
    </style>
</head>
<body>

<h1>Product Sales</h1>
<table id="sales-table" aria-label="Sales Table">
    <thead>
        <tr>
            <th>Product</th>
            <th>Sales</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>
<div id="total-sales" aria-live="polite">Total Sales: $0</div>
<p id="error-message" aria-live="assertive" style="color: red;"></p>

<script>
    async function fetchSalesData() {
        try {
            const response = await fetch('data:;base64,cHJvZHVjdCxzYWxlcyxyZWdpb24KTGFwdG9wLDE1MDAwLE5vcnRoClBob25lLDgwMDAsSm91dGgKVGFibGV0LDUwMDAsRWFzdApNb25pdG9yLDMwMDAsSZIc3Q==');
            if (!response.ok) throw new Error('Network response was not ok');
            const data = await response.text();
            const rows = data.trim().split('\n').map(row => row.split(','));
            return rows.slice(1); // Skip header
        } catch (error) {
            document.getElementById('error-message').textContent = 'Failed to fetch sales data: ' + error.message;
            return [];
        }
    }

    function displaySales(data) {
        const tableBody = document.querySelector('#sales-table tbody');
        let totalSales = 0;

        data.forEach(([product, sales]) => {
            const row = document.createElement('tr');
            const salesAmount = parseInt(sales, 10);
            totalSales += salesAmount;

            row.innerHTML = `<td>${product}</td><td>${salesAmount}</td>`;
            tableBody.appendChild(row);
        });

        document.getElementById('total-sales').textContent = 'Total Sales: $' + totalSales;
    }

    (async function init() {
        const salesData = await fetchSalesData();
        if (salesData.length > 0) {
            displaySales(salesData);
        }
    })();
</script>

</body>
</html>